<template>
<div class="howtouse" :style="{ display : $store.state.isActive ? 'none' : true}">
 <h2>ü§∑‚Äç‚ôÇÔ∏èHow to use 'John, I gotta go'ü§∑</h2><br/>
  <p>1. If you wanna search your destination, click on the container at the top.</p><br/>
  <p>2. Click the arrival - destination zone, and choose arrival, destination in modal window.</p><br/>
  <p>2-1. Across arrow button can switch arrival to destination.</p><br/>
  <p>2-2. Please understand that we only support 'One way' at the moment. Also only domestic line :)</p><br/>
  <p>3. And then, choose flight date, people and class.</p><br/>
  <p>4. After click 'search' button, available tickets will be right here.</p><br/>
  <p>5. Thank you for using 'John, I gotta go' and hope it will help you on your journeyüõ´.</p><br/>
  <p></p>
</div>
<div class="notFound" v-if="$store.state.totalCount == 0">
<h1>error</h1>
</div>
<div class="totalContainer">
  <div class="inner">
  <div v-if="loading" class="spinner-border text-primary" style="background-color: black"></div>
  <div v-if="message"> {{ $store.state.message }} </div>
  <div>
<div v-for="ticket in tickets" :key="ticket" :ticket="ticket">
  <div class ="ticketBox" @click="ticket.unfold =! ticket.unfold"
  :style="{height: ticket.unfold ? `300px` : `100px`,
         transition : ticket.unfold ?'0.6s' : '0.8s' }">  <!--ticket`s base--> <!--ÌÜ†Í∏Ä Î∂ÄÏó¨-->
                    <!--insert handle action-->
                    <!--ÎàÑÎ•¥Î©¥ Î∞ëÏùò Í∞ùÏ≤¥Îì§Ïù¥ Ï†ïÌï¥ÏßÑ Î∞©Ìñ•, Í∏∏Ïù¥ÎßåÌÅº Î∞ÄÎ†§ÎÇ® -->
                    <!--Î∞ÄÎ†§ÎÇòÍ∞Ñ ÏÉÅÌÉúÍπåÏßÄ Í±∏Î¶¨Îäî ÏãúÍ∞Ñ-->
                    <!--Onclick Action-->
<div id="firstDisplay">
  <div id="flightDetail">
    <div id="detailLabel">
      Departures</div>
    {{ shortDep }}
     <div id="detailLabel"> 
       {{ getAirport_dep }}</div>
       </div>
  <div id="flightDetail">
      <div id="animContainer" style="left: -20px">
        <div id="animation">
        <div id="circle"> </div>
        <div id="circle"> </div>  
        <div id="circle"> </div>
        </div>   
      </div>
      <div id="animContainer" style="left: 30px">
        <div id="animation">
        <div id="circle"> </div>
        <div id="circle"> </div>                              
        <div id="circle"> </div>
        </div>   
      </div>
      <img src="https://github.com/pizza3/asset/blob/master/airplane2.png?raw=true" 
 :style="Airplane_in"/>
  </div>
  <div id="flightDetail">
    <div id="detailLabel">
      Arrivals </div>
    {{ shortArr }}
     <div id="detailLabel">
       {{ getAirport_arr }}</div>
       </div>
  </div>
 
  <div id="first" :style="{transform: ticket.unfold ? 'rotate3d(1, 0, 0, -180deg)':'rotate3d(1, 0, 0, 0deg)',
  transition: ticket.unfold ? '0.4s' : '1s'}">
     
  <!--Í∞ÑÎã®Ìïú Ï†ïÎ≥¥(Ï∂úÎ∞ú, Î™©Ï†ÅÏßÄ, ÏãúÍ∞Ñ, Ìï≠Í≥µÏÇ¨)-->

  <div id="firstTop"> 
   <!-- Ìï¥Îãπ Ìï≠Í≥µÏÇ¨Ïóê ÏÜçÌïú Í∑∏Î¶ºÎßå Î≥¥Ïó¨ÏßÄÍ≤å if -->
   <img src="../assets/JEJU_airline.png" :style="{ width: '9em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'Ï†úÏ£ºÌï≠Í≥µ'"/>
   <img src="../assets/ASIANA_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'ÏïÑÏãúÏïÑÎÇòÌï≠Í≥µ'"/>
   <img src="../assets/JINAIR_airline.png" :style="{ width: '7.5rem', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'ÏßÑÏóêÏñ¥'"/>
   <img src="../assets/JEJU_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'ÏóêÏñ¥ÏÑúÏö∏'"/>
   <img src="../assets/KOREAN_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto', marginTop: '-0.7rem'}" v-if="ticket.airlineNm == 'ÎåÄÌïúÌï≠Í≥µ'"/>
   <img src="../assets/BUSAN_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'ÏóêÏñ¥Î∂ÄÏÇ∞'"/>
   <img src="../assets/TWAY_airline.png" :style="{ width: '4.2em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'Ìã∞Ïõ®Ïù¥Ìï≠Í≥µ'"/>
   <img src="../assets/EASTAR_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'Ïù¥Ïä§ÌÉÄÌï≠Í≥µ'"/>
   <img src="../assets/HI_AIR_airline.png" :style="{ width: 'auto', height: '5.2em', margin: 'auto'}" v-if="ticket.airlineNm == 'ÌïòÏù¥ÏóêÏñ¥'"/>
   <img src="../assets/FLY_GANGWON_airline.png" :style="{ width: '7.5em', height: 'auto', margin: 'auto'}" v-if="ticket.airlineNm == 'ÌîåÎùºÏù¥Í∞ïÏõê'"/>


    <div id="timeContainer">
     <div id="dateContainer">  <!--ÎÇ†Ïßú, ÏãúÍ∞Ñ Ïû•ÏÜå Îì±ÏùÑ Ï†ÄÏû•Ìï† Í≥µÍ∞Ñ-->
      {{ depNm }}             <!--Ï∂úÎ∞úÏßÄ-->  <!-- <-- Ïù¥Í±∞ Ìï¥Í≤∞Î≤ï Ï∞æÍ∏∞ -->
      <div id="detailtime"> {{ ticket.depTime }}:{{ ticket.depMin }} </div>  <!--ÏãúÍ∞Ñ-->
      {{ ex_month }} {{ this.$store.state.exDate }}   <!--ÎÇ†Ïßú-->                                       
     </div>
      <img alt="ÎπÑÌñâÍ∏∞" src="https://github.com/pizza3/asset/blob/master/airplane2.png?raw=true" :style="Airplane_out"/>
     <div id="dateContainer"><!--ÎÇ†Ïßú, ÏãúÍ∞Ñ Ïû•ÏÜå Îì±ÏùÑ Ï†ÄÏû•Ìï† Í≥µÍ∞Ñ-->
      {{ arrNm }}     <!--Ï∂úÎ∞úÏßÄ-->
      <div id="detailtime">  {{ ticket.arrTime }}:{{ ticket.arrMin }} </div>  <!--ÏãúÍ∞Ñ-->
      {{ ex_month }} {{ this.$store.state.exDate }}  <!--ÎÇ†Ïßú-->
    </div>
  </div>
    </div>
  <div id="firstBehind">
          <div id="firstBehindDisplay">
            <div id="firstBehindRow">
              <div id="detail">
                Flight Time
                <div id="detailLabel">{{ ticket.depTime }}:{{ ticket.depMin }} - {{ ticket.arrTime }}:{{ ticket.arrMin }} </div> <!-- arrPlandTime - depPlandTime -->
              </div>
              <div id="detail">
                Transfer
                <div id="detailLabel">No Transfer</div>
              </div>
            </div>
            <div id="firstBehindRow">
              <div id="detail">
                Duration
                <div id="detailLabel"> about 1hour </div>
              </div>
              <div id="detail">
                Flight Num
                <div id="detailLabel"> {{ ticket.vihicleId }} </div>
              </div>
            </div>
            <div id="firstBehindRow">
              <div id="detail">
                Boarding Time
                <div id="detailLabel"> {{ ticket.depTime }}:{{ ticket.depMin }} - 20min </div>  <!-- depPlandTime - 20min -->
              </div>
              <div id="detail">
                People
                <div id="detailLabel"> {{ $store.state.totalPerson }} </div> <!-- random -->
              </div>
            </div>
          </div> 
<div id="second" :style="{transform: ticket.unfold ? `rotate3d(1, 0, 0, -180deg)`:`rotate3d(1, 0, 0, 0deg)`,
 transition: ticket.unfold ? '0.8s' : '0.8s'  }">
    <div id="secondTop"/>
             <div id="secondBehind">
              <div id="secondBehindDisplay">
                <div id="price">
                  Price
                  <div id="priceLabel">please check in website</div> 
                </div>
                <div id="price">
                  Class
                  <div id="priceLabel"> {{$store.state.selectClass}} </div>
                </div>
                <img
                  id="barCode"
                  src="https://github.com/pizza3/asset/blob/master/barcode.png?raw=true"
                />
              </div> 
            
               <div id="third"  :style="{ transform: ticket.unfold ? `rotate3d(1, 0, 0, -180deg)` : `rotate3d(1, 0, 0, 0deg)`,
        transition: ticket.unfold ? '1s' : '0.4s' }">
                <div id="thirdTop"/>
                 <div id="secondBehindBottom">
                </div>
              </div> 
            </div>
          </div> 
         </div>
      </div>  
    </div>
  </div>
<!-- <infinite-loading @infinite="()"></inifinite-loading>
 -->
 </div>
  </div>
 </div>
 </template>

<script>
/* import InfiniteScroll from 'infinite-loading-vue3' */
/* import InfiniteLoading from 'vue-infinite-Loading'
 */import { mapState, mapGetters } from 'vuex'
export default {   // Îç∞Ïù¥ÌÑ∞ Ï†ÄÏû•ÌïòÎäî Í≥≥  {{ Îç∞Ïù¥ÌÑ∞Î∞îÏù∏Îî© }}
 
  props : {

  },    
  name: 'TicketBox',

  methods: {  
   /*  infiniteHandler(){
        this.#store.dispatch('searchInfo')
    } */
  },

  mounted() { 

  },

  components: {
    /* InfiniteLoading */
/* InfiniteScroll */
  },

  computed: {
    tickets() {
      return this.$store.state.tickets;
    },
    ...mapState(['depNm', 'arrNm', 'airlineNm', 'selectClass']),
    ...mapGetters({
      shortDep: 'shortDep',
      shortArr: 'shortArr',
      getAirport_dep : 'getAirport_dep',
      getAirport_arr: 'getAirport_arr',
      getAirline: 'getAirline',
      getDepAirportNm: 'getDepAirportNm'
    }),
  /*   disable() {
      let a = document.getElementById('htu')
      if(this.$store.state.isActive == true)
        return a.style.display == 'none';
    }, */
    loading() {
      return this.$store.state.loading
    },
    ex_month() {
      let eng_Month = ''
      if(this.$store.state.exMonth == '1'){
        eng_Month = 'January'
      }
      else if(this.$store.state.exMonth == '2'){
        eng_Month = 'Febuary'
      }
      else if(this.$store.state.exMonth == '3'){
        eng_Month = 'March'
      }
      else if(this.$store.state.exMonth == '4'){
        eng_Month = 'April'
      }
      else if(this.$store.state.exMonth == '5'){
        eng_Month = 'May'
      }
      else if(this.$store.state.exMonth == '6'){
        eng_Month = 'June'
      }
      else if(this.$store.state.exMonth == '7'){
        eng_Month = 'July'
      }
      else if(this.$store.state.exMonth == '8'){
        eng_Month = 'August'
      }
      else if(this.$store.state.exMonth == '9'){
        eng_Month = 'September'
      }
      else if(this.$store.state.exMonth == '10'){
        eng_Month = 'October'
      }
      else if(this.$store.state.exMonth == '11'){
        eng_Month = 'November'
      }
      else if(this.$store.state.exMonth == '12'){
        eng_Month = 'December'
      }
      return eng_Month
    },
  },
  
  data(){
    
    return{          
      openModal : true,
      unfold: false,//Ï≤òÏùåÏóêÎäî fold ÎêòÏñ¥ÏûàÎäî ÏÉÅÌÉúÏù¥Îãà Ï¥àÍ∏∞Í∞íÏùÄ false
      Departure : 'Incheon',
      Arrival : 'Jeju',
      ArrivalDate : 'October 15th',
      Airplane_in :{  height:'37px',
                      marginTop:'23px',
                      marginLeft:'8px',
                      marginRight:'10px',
                      position:'absolute',
                      },            
      Airplane_out :{
                      height:'27px',
                      marginTop:'24px',
                      marginLeft:'10px',
                      marginRight:'16px',
                      }, 
    }
  }
}
</script>

 <style lang="scss" scoped>
@import '../UI/scss/main.scss';
@import url('https://fonts.googleapis.com/css2?family=Raleway:wght@200;400&display=swap'); 
@import url('https://fonts.googleapis.com/css2?family=Indie+Flower&display=swap');
 .howtouse {
   width: 28rem;
   height: auto;
   margin: {
     top: 2rem;
     left: auto;
     right: auto;
   }
   padding: 1rem;
   border: 2px dashed #b9acac;
   border-radius: $radius-3;
   h2 {
     font: {
       family: 'Raleway', sans-serif;
       weight: bold;
     }
   }
   p {
     margin-top: -12px;
     font: {
       family: 'Indie Flower', cursive;
       size: 20px;
       weight: 400;
     }
   }
 }
 .totalContainer {
   display: flex;
   justify-content: center;
 }
.ticketBox{
    width: 340px;
    height: 100px;
    position: relative;
    backface-visibility: hidden;
    border-radius: 8px;
    box-shadow: 0px 0px 3px 0px rgba(132, 132, 132, 0.1);
    transform-origin: bottom;
    position: relative;
    top: 1rem;
    margin: {
      top: 1.5rem;
      left: auto;
      right: auto;
      bottom: 0;
    }
    cursor: grab;  
}

 #timeContainer {
    display: flex;
    margin: { 
      top: 13px;
      left: auto;
      right: 1.3rem;
      }

  }
                        
#dateContainer{           /*Ï≤´ÌéòÏù¥ÏßÄ-Ï∂úÎ∞úÏßÄÏùò ÏãúÍ∞Ñ, ÎÇ†Ïßú*/
  color: rgb(121, 115, 115);
  font-size: 9px;
  padding-top: 10px; 
}

#detailtime{
  font-weight: bold;
  color:#000000;
  font-size: 16px; 
}

  #first {
    width: 340px;
    height: 100px;
    position: absolute;
    border-radius: 5px;
    color: #000;
    transform-origin: bottom;
    transform-style: preserve-3d;
    border-radius: 8px;
    display: flex;
    animation: shake 0.3s;
    
    /* vibration effect when close to flight */
   /*  :hover {
      animation: shake 1s;
      transform: translate3d(0, 0, 0);
      backface-visibility: hidden;
      perspective: 1000px;
    }

    @keyframes shake {
      10%, 90% {
        transform: translate3d(-1px, 0, 0);
      }
      
      20%, 80% {
        transform: translate3d(1px, 0, 0);
      }

      30% {
        transform : translate3d(2px, 0, 0);
      }

      50%, 70% {
        transform: translate3d(-4px, 0, 0);
      }

      40%, 60% {
        transform: translate3d(4px, 0, 0);
      }
    } */
  }

  #firstTop {
    width: 340px;
    height: 100px;
    position: absolute;
    background: #ffffff;
    backface-visibility: hidden;
    border-radius: 8px;     
    box-shadow: 0px 0px 3px 0px rgba(132, 132, 132, 0.15);
    display: flex;
    justify-content: space-around;
  }

  #firstDisplay {  /*Ï≤´Î≤àÏß∏ Ïπ∏Ïóê Ï¢ÖÏÜçÎêòÏñ¥ ÏûàÎäî */
    width: 100%;
    height: 100px;
    position: absolute;
    background: #fff;
    border-radius: 8px;
    font-size: 20px;
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    padding: 12px 23px;
    flex-wrap: wrap;
    backface-visibility: hidden;
    box-shadow: 0px 0px 25px -1px rgba(0, 0, 0, 0.17);
  }

  #flightDetail {
    font-size: 20px;
    font-weight: bold;
    margin: -3px 0px 0px 10px;
    color: #3f3f3f;
    flex: 0.4;
  }

#detailLabel{
  color: lightslategrey;
  font-size: 9px;
}

#animContainer{
  padding-left: 0px;
  position: absolute;
  width: 30px;
  height: 45px;
  top: 48px;
  margin-left: 140px;
  overflow: hidden;
}

#animation{
  width: 100px;
  position: absolute;
  display: flex;
  animation: 1s slidein 2s infinite linear;
}

  @keyframes slidein {
    to {
      transform: translateX(-18px);
    }
  
    from {
      transform: translateX(0px);
    }
  }

#circle {
  width: 5px;
  height: 5px;
  background: #707070;
  border-radius: 50%;
  margin-right: 13px;
}
  #firstBehind {
    width: 340px;
    height: 100px;
    position: absolute;
    background: #fff;
    transform-origin: center;
    transform: rotate3d(1, 0, 0, -180deg);
    backface-visibility: hidden;
    border-radius: 8px;
    border: 1px dashed #d1d1d1;
    border-left: none;
    border-right: none;
  }
  
  #firstBehindDisplay {
    width: 100%;
    height: 100px;
    position: absolute;
    background: #fff;
    border-radius: 8px;
    padding: 6px 23px;
    display: flex;
    justify-content: space-between;
    box-shadow: 0px 11px 25px -1px rgba(0, 0, 0, 0.17);
  }
  
  #firstBehindRow {
    position: relative;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin-top: 7px;
    text-align: left;
  }
  
  #detail {
    font-size: 15px;
    color: rgb(69, 69, 69);
    font-weight: bold;
  }
  
  #detailLabel {
    color: #686868;
    font-size: 10px;
    font-weight: 100;
  }
  
  #second {
    width: 340px;
    height: 50px;
    position: absolute;
    bottom: -2px;
    transform-origin: bottom;
    transform-style: preserve-3d;
    transition: 0.2s;
    border-radius: 8px;
  }
  
  #secondTop {
    width: 340px;
    height: 50px;
    position: absolute;
    background: rgb(231, 231, 231);
    backface-visibility: hidden;
    border-radius: 8px;
  }
  
  #secondBehind {
    width: 340px;
    height: 50px;
    position: absolute;
    background: #fff;
    transform-origin: center;
    transform: rotate3d(1, 0, 0, -180deg);
    backface-visibility: hidden;
    border-radius: 8px;
    border: 1px dashed #d1d1d1;
    border-left: none;
    border-right: none;
  }
  
  #secondBehindDisplay {
    width: 100%;
    height: 50px;
    position: absolute;
    background: #fff;
    border-radius: 8px;
    border-bottom: 1px dashed #d1d1d1;
    display: flex;
    justify-content: space-between;
    padding: 10px 23px;
    box-shadow: 0px 11px 25px -1px rgba(0, 0, 0, 0.17);
  }
  
  #secondBehindBottom {
    width: 340px;
    height: 50px;
    position: absolute;
    background: white;
    transform-origin: center;
    transform: rotate3d(1, 0, 0, -180deg);
    backface-visibility: hidden;
    border-radius: 0px 0px 8px 8px;
    border-radius: 8px;
    box-shadow: 0px 11px 25px -1px rgba(0, 0, 0, 0.17);
  }

  #thirdTop {
  width: 340px;
  height: 50px;
  position: absolute;
  background: rgb(190, 190, 190);
  backface-visibility: hidden;
  border-radius: 8px;
}
  
  #third {
    width: 340px;
    height: 50px;
    position: absolute;
    transform-origin: bottom;
    transform-style: preserve-3d;
    border-radius: 8px;
  }

  #price {
    color: #2d2d2d;
    font-weight: bold;
    font-size: 15px;
    display: flex;
    flex-direction: column;
    margin-top: -2px;
  }
  
  #priceLabel {
    color: #747474;
    font-weight: 100;
    font-size: 10px;
    text-align: left;
  }
  
  #barCode {
    width: 98px;
    height: 30px;
  }
  
 </style>